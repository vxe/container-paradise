# -*- mode: snippet; require-final-newline: nil -*-
# name: pdsh-do-on-each-edge
# key: pdshdooneachedge
# binding: direct-keybinding
# --
cat << ~ |
ams
ash 
atl
bos
chi
dal
drf
fra
lax
lon
man
mia
msp
nyc
sea
sjc
syd
tyo
~
    while read edge; do pdsh -w "${1:rolename}${2:number}.$edge.parsec.apple.com" "if [[ \`${3:shell-command}\` ]]; then echo $edge:BAD; else echo $edge:GOOD; 
fi"; done